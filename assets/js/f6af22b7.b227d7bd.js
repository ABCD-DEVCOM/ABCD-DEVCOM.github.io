"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[8823],{28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var i=n(96540);const r={},t=i.createContext(r);function o(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:s},e.children)}},77364:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"abcd-install/fixing-permissions-linux","title":"Fixing File Permissions on Linux","description":"This guide addresses common permission issues where the web server (Apache) cannot write to databases, or where you (as an SFTP user) cannot edit files created by the system.","source":"@site/docs/abcd-install/fixing-permissions-linux.md","sourceDirName":"abcd-install","slug":"/abcd-install/fixing-permissions-linux","permalink":"/docs/3.1/abcd-install/fixing-permissions-linux","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-install/fixing-permissions-linux.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Folder Permissions","sidebar_custom_props":{"myEmoji":"\ud83d\uddc0"}},"sidebar":"tutorialSidebar","previous":{"title":"Linux Installation","permalink":"/docs/3.1/abcd-install/linux-installation.md"},"next":{"title":"Windows Installation","permalink":"/docs/3.1/abcd-install/windows-installation"}}');var r=n(74848),t=n(28453);const o={sidebar_position:3,sidebar_label:"Folder Permissions",sidebar_custom_props:{myEmoji:"\ud83d\uddc0"}},a="Fixing File Permissions on Linux",d={},l=[{value:"Step 1: User &amp; Group Setup",id:"step-1-user--group-setup",level:2},{value:"Step 2: Define Ownership",id:"step-2-define-ownership",level:2},{value:"Step 3: Write Permissions &amp; SGID",id:"step-3-write-permissions--sgid",level:2},{value:"A. Application Folders (Code)",id:"a-application-folders-code",level:3},{value:"B. The <code>cgi-bin</code> Directory (Executables)",id:"b-the-cgi-bin-directory-executables",level:3},{value:"C. Temporary &amp; Upgrade Folders",id:"c-temporary--upgrade-folders",level:3},{value:"Automated Fix Script",id:"automated-fix-script",level:2}];function c(e){const s={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"fixing-file-permissions-on-linux",children:"Fixing File Permissions on Linux"})}),"\n",(0,r.jsx)(s.p,{children:"This guide addresses common permission issues where the web server (Apache) cannot write to databases, or where you (as an SFTP user) cannot edit files created by the system."}),"\n",(0,r.jsxs)(s.p,{children:["The goal is to create a ",(0,r.jsx)(s.strong,{children:"coexistence environment"})," where:"]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"You (User):"})," Have full control to edit code and upload files via SFTP."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsxs)(s.strong,{children:["Web Server (",(0,r.jsx)(s.code,{children:"www-data"}),"):"]})," Has permission to run the application and write to the ",(0,r.jsx)(s.code,{children:"bases"})," folder."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ABCD Binaries:"})," Have execution rights."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"step-1-user--group-setup",children:"Step 1: User & Group Setup"}),"\n",(0,r.jsxs)(s.p,{children:["First, add your current user to the web server's group (",(0,r.jsx)(s.code,{children:"www-data"}),")."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Add your user to the apache group\r\nsudo usermod -aG www-data $USER\r\n\n"})}),"\n",(0,r.jsx)(s.admonition,{title:"Logout Required",type:"caution",children:(0,r.jsxs)(s.p,{children:["After running the command above, you must ",(0,r.jsx)(s.strong,{children:"logout and login again"})," (SSH/SFTP) for the group changes to take effect."]})}),"\n",(0,r.jsx)(s.h2,{id:"step-2-define-ownership",children:"Step 2: Define Ownership"}),"\n",(0,r.jsxs)(s.p,{children:["Assuming ABCD is installed in ",(0,r.jsx)(s.code,{children:"/var/www/html/ABCD"}),":"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Set you as the owner and www-data as the group owner\r\nsudo chown -R $USER:www-data /var/www/html/ABCD\r\n\n"})}),"\n",(0,r.jsx)(s.h2,{id:"step-3-write-permissions--sgid",children:"Step 3: Write Permissions & SGID"}),"\n",(0,r.jsxs)(s.p,{children:["We will use the ",(0,r.jsx)(s.strong,{children:"SGID (Set Group ID)"})," bit. This ensures that any new file created inside these folders automatically inherits the ",(0,r.jsx)(s.code,{children:"www-data"})," group, preventing future permission lockouts."]}),"\n",(0,r.jsx)(s.h3,{id:"a-application-folders-code",children:"A. Application Folders (Code)"}),"\n",(0,r.jsxs)(s.p,{children:["Code folders (",(0,r.jsx)(s.code,{children:"htdocs"}),") should be editable by you and readable by the server."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Set permissions 2775 (rwxrwxr-x + SGID) for directories\r\nsudo find /var/www/html/ABCD -type d -exec chmod 2775 {} \\;\r\n\r\n# Set permissions 0664 (rw-rw-r--) for files\r\nsudo find /var/www/html/ABCD -type f -exec chmod 0664 {} \\;\r\n\n"})}),"\n",(0,r.jsxs)(s.h3,{id:"b-the-cgi-bin-directory-executables",children:["B. The ",(0,r.jsx)(s.code,{children:"cgi-bin"})," Directory (Executables)"]}),"\n",(0,r.jsxs)(s.p,{children:["This folder contains the WXIS and other CISIS binaries. They must have the ",(0,r.jsx)(s.strong,{children:"execution bit"})," (+x) set."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Force execution flag on binary files\r\nsudo chmod -R +x /var/www/html/ABCD/cgi-bin/\r\n\n"})}),"\n",(0,r.jsx)(s.h3,{id:"c-temporary--upgrade-folders",children:"C. Temporary & Upgrade Folders"}),"\n",(0,r.jsxs)(s.p,{children:["If you use the built-in ",(0,r.jsx)(s.em,{children:"Update Manager"}),", the server needs full write access to create temporary directories."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"# Allow the web server to create folders for upgrades\r\nsudo chmod -R 777 /var/www/html/ABCD/htdocs/upgrade/ 2>/dev/null\r\n\n"})}),"\n",(0,r.jsx)(s.h2,{id:"automated-fix-script",children:"Automated Fix Script"}),"\n",(0,r.jsxs)(s.p,{children:["You can save the following script as ",(0,r.jsx)(s.code,{children:"fix_abcd_perms.sh"})," in your server root to quickly repair permissions in the future."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",metastring:'title="fix_abcd_perms.sh"',children:'#!/bin/bash\r\n# Configuration\r\nABCD_PATH="/var/www/html/ABCD"\r\nWS_GROUP="www-data"\r\nCURRENT_USER=$(whoami)\r\n\r\necho "1. Setting Ownership to $CURRENT_USER:$WS_GROUP..."\r\nsudo chown -R $CURRENT_USER:$WS_GROUP $ABCD_PATH\r\n\r\necho "2. Applying directory permissions (2775)..."\r\nsudo find $ABCD_PATH -type d -exec chmod 2775 {} \\;\r\n\r\necho "3. Applying file permissions (0664)..."\r\nsudo find $ABCD_PATH -type f -exec chmod 0664 {} \\;\r\n\r\necho "4. Restoring executables..."\r\nsudo chmod -R +x $ABCD_PATH/cgi-bin/\r\n\r\necho "Done!"\r\n\n'})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);