"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[9067],{7805:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"abcd-administration/maintenance","title":"Database Maintenance","description":"ABCD provides a set of utilities based on the CISIS library to maintain the health of your databases. These are accessed via the Administration > Database Maintenance or Utilities menu.","source":"@site/docs/abcd-administration/maintenance.md","sourceDirName":"abcd-administration","slug":"/abcd-administration/maintenance","permalink":"/docs/3.1/abcd-administration/maintenance","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-administration/maintenance.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"title":"Database Maintenance","sidebar_label":"Maintenance & Utilities","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Email Settings","permalink":"/docs/3.1/abcd-administration/email-configuration"},"next":{"title":"Backup & Restore","permalink":"/docs/3.1/abcd-administration/backup-restore"}}');var s=i(74848),a=i(28453);const r={title:"Database Maintenance",sidebar_label:"Maintenance & Utilities",sidebar_position:7},l="Database Maintenance Utilities",o={},d=[{value:"1. Inverted File Generation (Indexing)",id:"1-inverted-file-generation-indexing",level:2},{value:"Full Generation vs. Update",id:"full-generation-vs-update",level:3},{value:"2. Unlocking Databases and Records",id:"2-unlocking-databases-and-records",level:2},{value:"Unlocking a Database (Global Lock)",id:"unlocking-a-database-global-lock",level:3},{value:"Unlocking Records (CNTLMFN)",id:"unlocking-records-cntlmfn",level:3},{value:"3. Destructive Operations",id:"3-destructive-operations",level:2},{value:"Initializing (Clearing) a Database",id:"initializing-clearing-a-database",level:3},{value:"Deleting a Database",id:"deleting-a-database",level:3},{value:"4. Troubleshooting Common Errors",id:"4-troubleshooting-common-errors",level:2},{value:"&quot;Effect of Fatal Error&quot;",id:"effect-of-fatal-error",level:3},{value:"&quot;Write Protection&quot;",id:"write-protection",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"database-maintenance-utilities",children:"Database Maintenance Utilities"})}),"\n",(0,s.jsxs)(n.p,{children:["ABCD provides a set of utilities based on the ",(0,s.jsx)(n.strong,{children:"CISIS"})," library to maintain the health of your databases. These are accessed via the ",(0,s.jsx)(n.strong,{children:"Administration > Database Maintenance"})," or ",(0,s.jsx)(n.strong,{children:"Utilities"})," menu."]}),"\n",(0,s.jsx)(n.h2,{id:"1-inverted-file-generation-indexing",children:"1. Inverted File Generation (Indexing)"}),"\n",(0,s.jsxs)(n.p,{children:["The Inverted File (",(0,s.jsx)(n.code,{children:".cnt"}),", ",(0,s.jsx)(n.code,{children:".ifp"}),", ",(0,s.jsx)(n.code,{children:".n01"}),', etc.) is the search index. If users report that "a record exists but cannot be found," the index is likely out of sync with the Master File.']}),"\n",(0,s.jsx)(n.h3,{id:"full-generation-vs-update",children:"Full Generation vs. Update"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Update"}),": Adds new records to the index. Usually happens automatically when saving records."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Full Generation"}),": Deletes the old index and rebuilds it from scratch using the FST (Field Selection Table)."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"To perform a Full Generation:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Utilities > Maintenance > Full Inverted File Generation"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Select the database."}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Execute"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Wait for the process to finish (do not close the window)."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"2-unlocking-databases-and-records",children:"2. Unlocking Databases and Records"}),"\n",(0,s.jsx)(n.p,{children:"ABCD uses a locking mechanism (semaphore) to prevent two users from editing the same data simultaneously. Sometimes, due to browser crashes, power failures, or server restarts, these locks remain active erroneously."}),"\n",(0,s.jsx)(n.h3,{id:"unlocking-a-database-global-lock",children:"Unlocking a Database (Global Lock)"}),"\n",(0,s.jsx)(n.p,{children:'If operators see a message like "Database is locked", it means a global administrative process was interrupted.'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Utilities > Maintenance > Unlock Database"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Select the database."}),"\n",(0,s.jsx)(n.li,{children:"Confirm the action."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Technical Action:"})," This deletes the ",(0,s.jsx)(n.code,{children:"write.lock"})," or ",(0,s.jsx)(n.code,{children:"exclusive.lock"})," files inside the database ",(0,s.jsx)(n.code,{children:"data"})," folder."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"unlocking-records-cntlmfn",children:"Unlocking Records (CNTLMFN)"}),"\n",(0,s.jsx)(n.p,{children:'If a specific record says "Entry locked by operator X", but that operator is not online.'}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Utilities > Maintenance > Unlock Records"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["This runs the ",(0,s.jsx)(n.code,{children:"ctlmfn"}),' utility (Control MFN) to clear the "operator" tag in the record itself (typically stored in the control record).']}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"3-destructive-operations",children:"3. Destructive Operations"}),"\n",(0,s.jsx)(n.admonition,{title:"High Risk Area",type:"danger",children:(0,s.jsxs)(n.p,{children:["The following operations involve ",(0,s.jsx)(n.strong,{children:"permanent data loss"}),". Ensure you have a valid backup (ISO file) before proceeding."]})}),"\n",(0,s.jsx)(n.h3,{id:"initializing-clearing-a-database",children:"Initializing (Clearing) a Database"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Initialize"})," means wiping all data (records) from a database while keeping its structure (FDT, FST, PFT, Worksheets)."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use Case:"})," You created a test database, filled it with dummy data, and now want to empty it to start production."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Administration > Database maintenance"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Initialize database"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Result:"})," It deletes the ",(0,s.jsx)(n.code,{children:".mst"})," (Master File) and ",(0,s.jsx)(n.code,{children:".xrf"})," (Cross Reference) files and replaces them with empty ones."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"deleting-a-database",children:"Deleting a Database"}),"\n",(0,s.jsx)(n.p,{children:"To completely remove a database (including structure, definition files, and data) from the server."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Administration > Database maintenance"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Delete database"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Confirm the folder name."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Result:"})," The entire folder in ",(0,s.jsx)(n.code,{children:"/bases/folder_name"})," is removed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Important:"})," You must manually remove the entry from ",(0,s.jsx)(n.code,{children:"bases.dat"})," afterwards to stop it from appearing in the menu."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"4-troubleshooting-common-errors",children:"4. Troubleshooting Common Errors"}),"\n",(0,s.jsx)(n.h3,{id:"effect-of-fatal-error",children:'"Effect of Fatal Error"'}),"\n",(0,s.jsxs)(n.p,{children:["If you see this message during a search or save, the ",(0,s.jsx)(n.strong,{children:"Master File (.mst)"})," might be corrupted."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Try running ",(0,s.jsx)(n.strong,{children:"Full Inverted File Generation"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"If that fails, try restoring from the latest Backup/ISO."}),"\n",(0,s.jsxs)(n.li,{children:["Advanced users can try the CLI tool ",(0,s.jsx)(n.code,{children:"mkf"})," to attempt a repair."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"write-protection",children:'"Write Protection"'}),"\n",(0,s.jsx)(n.p,{children:"If you cannot edit records:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check Permissions:"})," The web server user (e.g., ",(0,s.jsx)(n.code,{children:"www-data"}),", ",(0,s.jsx)(n.code,{children:"apache"}),", or ",(0,s.jsx)(n.code,{children:"IUSR"}),") must have ",(0,s.jsx)(n.strong,{children:"write/modify"})," access to the ",(0,s.jsx)(n.code,{children:"bases"})," folder."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check Status:"}),' Verify if the database status is set to "Read Only" in the ',(0,s.jsx)(n.code,{children:"dr_path.def"})," file."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(96540);const s={},a=t.createContext(s);function r(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);