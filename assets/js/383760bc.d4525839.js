"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[6951],{28453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var t=r(96540);const i={},o=t.createContext(i);function a(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(o.Provider,{value:n},e.children)}},74779:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"abcd-install/virtual-host","title":"Virtual Host Configuration","description":"Using Virtual Hosts is the recommended way to run ABCD, allowing you to isolate the application and protect data directories.","source":"@site/docs/abcd-install/virtual-host.md","sourceDirName":"abcd-install","slug":"/abcd-install/virtual-host","permalink":"/docs/3.1/abcd-install/virtual-host","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-install/virtual-host.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"sidebar_label":"Virtual Host Config"},"sidebar":"tutorialSidebar","previous":{"title":"Folder Structure","permalink":"/docs/3.1/abcd-install/folder-structure"},"next":{"title":"Upgrade Guide","permalink":"/docs/3.1/abcd-install/upgrade"}}');var i=r(74848),o=r(28453);const a={sidebar_position:5,sidebar_label:"Virtual Host Config"},s="Virtual Host Configuration",c={},l=[{value:"Configuration File (.conf)",id:"configuration-file-conf",level:2},{value:"Activation",id:"activation",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"virtual-host-configuration",children:"Virtual Host Configuration"})}),"\n",(0,i.jsx)(n.p,{children:"Using Virtual Hosts is the recommended way to run ABCD, allowing you to isolate the application and protect data directories."}),"\n",(0,i.jsxs)(n.p,{children:["Below is a robust configuration for Apache 2.4 (Linux), running on port ",(0,i.jsx)(n.strong,{children:"9090"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"configuration-file-conf",children:"Configuration File (.conf)"}),"\n",(0,i.jsxs)(n.p,{children:["Create the file ",(0,i.jsx)(n.code,{children:"/etc/apache2/sites-available/abcd.conf"})," with the content below."]}),"\n",(0,i.jsx)(n.admonition,{title:"Easy Maintenance",type:"tip",children:(0,i.jsxs)(n.p,{children:["Note the use of the ",(0,i.jsx)(n.code,{children:"Define ABCD_ROOT"})," directive. If you installed ABCD in a different location (e.g., ",(0,i.jsx)(n.code,{children:"/opt/ABCD"}),"), just change that line, and everything else adjusts automatically."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-apache",children:'# Define operation port\r\nDefine ABCD_PORT 9090\r\n\r\n# Ensure Apache listens on this port\r\nListen ${ABCD_PORT}\r\n\r\n<VirtualHost *:${ABCD_PORT}>\r\n    # Adjust ServerName to your real domain or IP\r\n    ServerName abcd.library.local\r\n    ServerAdmin webmaster@localhost\r\n    \r\n    # Priority for index files\r\n    DirectoryIndex index.php index.html\r\n\r\n    # --- PATH DEFINITIONS ---\r\n    # Change here if installed elsewhere (e.g., /opt/ABCD/www)\r\n    Define ABCD_ROOT  "/var/www/html/ABCD"\r\n    \r\n    # Define where databases are (can be outside root for security)\r\n    Define ABCD_BASES "/var/www/html/ABCD/bases/"\r\n\r\n    # --- DOCUMENT ROOT ---\r\n    DocumentRoot ${ABCD_ROOT}/htdocs\r\n\r\n    <Directory ${ABCD_ROOT}/>\r\n        Options +Indexes -FollowSymLinks +MultiViews\r\n        Require all granted\r\n    </Directory>\r\n\r\n    <Directory ${ABCD_ROOT}/htdocs>\r\n        Options +Indexes -FollowSymLinks +MultiViews\r\n        Require all granted\r\n    </Directory>\r\n\r\n    # --- CGI-BIN (ABCD Engine) ---\r\n    ScriptAlias /cgi-bin/ "${ABCD_ROOT}/cgi-bin/"\r\n    <Directory "${ABCD_ROOT}/cgi-bin/">\r\n        AllowOverride None\r\n        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch\r\n        AddHandler cgi-script .cgi\r\n        AddHandler cgi-script .exe\r\n        # For Linux binaries without extension:\r\n        SetHandler cgi-script\r\n        Require all granted\r\n    </Directory>\r\n\r\n    # --- ALIAS FOR BASES (Images and Documents) ---\r\n    # This allows accessing book covers and PDFs via URL /docs/\r\n    Alias /docs/ "${ABCD_BASES}"\r\n    <Directory "${ABCD_BASES}">\r\n        Options -Indexes -FollowSymLinks -MultiViews\r\n        AllowOverride None\r\n        Require all granted\r\n    </Directory>\r\n\r\n    # --- LOGS ---\r\n    # Separate logs to ease error detection\r\n    ErrorLog  ${APACHE_LOG_DIR}/error_abcd_${ABCD_PORT}.log\r\n    CustomLog ${APACHE_LOG_DIR}/access_abcd_${ABCD_PORT}.log combined\r\n</VirtualHost>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"activation",children:"Activation"}),"\n",(0,i.jsx)(n.p,{children:"After creating the file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo a2ensite abcd.conf\r\nsudo systemctl reload apache2\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);