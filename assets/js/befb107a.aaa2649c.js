"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[4211],{28453:(e,o,t)=>{t.d(o,{R:()=>s,x:()=>i});var c=t(96540);const n={},r=c.createContext(n);function s(e){const o=c.useContext(r);return c.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),c.createElement(r.Provider,{value:o},e.children)}},46181:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>a,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"abcd-modules/opac-abcd/opac-admin/general","title":"System Architecture & Global Config","description":"The ABCD OPAC is not just a search interface; it is a file-based CMS controlled by a hierarchy of configuration files. Understanding this architecture is crucial for troubleshooting and advanced customization.","source":"@site/docs/abcd-modules/opac-abcd/opac-admin/general.md","sourceDirName":"abcd-modules/opac-abcd/opac-admin","slug":"/abcd-modules/opac-abcd/opac-admin/general","permalink":"/docs/3.1/abcd-modules/opac-abcd/opac-admin/general","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-modules/opac-abcd/opac-admin/general.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"System Architecture & Global Config","sidebar_label":"Architecture & Global Config","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/docs/3.1/abcd-modules/opac-abcd/opac-admin/"},"next":{"title":"Content & Layout","permalink":"/docs/3.1/abcd-modules/opac-abcd/opac-admin/cms-layout"}}');var n=t(74848),r=t(28453);const s={title:"System Architecture & Global Config",sidebar_label:"Architecture & Global Config",sidebar_position:2},i="System Architecture & Global Configuration",a={},l=[{value:"1. The Bootloader: <code>config_opac.php</code>",id:"1-the-bootloader-config_opacphp",level:2},{value:"2. Global Settings: <code>opac.def</code>",id:"2-global-settings-opacdef",level:2},{value:"Critical Parameters",id:"critical-parameters",level:3},{value:"3. The <code>opac_conf</code> Directory Structure",id:"3-the-opac_conf-directory-structure",level:2}];function d(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"system-architecture--global-configuration",children:"System Architecture & Global Configuration"})}),"\n",(0,n.jsx)(o.p,{children:"The ABCD OPAC is not just a search interface; it is a file-based CMS controlled by a hierarchy of configuration files. Understanding this architecture is crucial for troubleshooting and advanced customization."}),"\n",(0,n.jsxs)(o.h2,{id:"1-the-bootloader-config_opacphp",children:["1. The Bootloader: ",(0,n.jsx)(o.code,{children:"config_opac.php"})]}),"\n",(0,n.jsx)(o.p,{children:"Located in the root of the OPAC (or linked from Central), this PHP file is the first to run. It dictates the environment variables."}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.strong,{children:"Key Variables:"})}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"$db_path"})}),": The absolute path to the ",(0,n.jsx)(o.code,{children:"bases"})," folder.","\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.em,{children:"Logic:"})," Unlike the Central module, the OPAC allows dynamic path switching via the ",(0,n.jsx)(o.a,{href:"./advanced-access",children:"Multi-Context System"}),"."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"$opac_path"})}),": The web root of the OPAC."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"$lang"})}),": The priority logic for language detection (Session > Get > Browser > Default)."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"$restricted_opac"})}),": Defines if the portal is public (",(0,n.jsx)(o.code,{children:"N"}),") or requires login (",(0,n.jsx)(o.code,{children:"Y"}),") to even view the home page."]}),"\n"]}),"\n",(0,n.jsxs)(o.h2,{id:"2-global-settings-opacdef",children:["2. Global Settings: ",(0,n.jsx)(o.code,{children:"opac.def"})]}),"\n",(0,n.jsxs)(o.p,{children:["Located in ",(0,n.jsx)(o.code,{children:"bases/opac_conf/opac.def"}),", this INI file controls the global behavior and appearance."]}),"\n",(0,n.jsx)(o.h3,{id:"critical-parameters",children:"Critical Parameters"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-ini",children:"[OPAC]\r\nOpacHttp=http://localhost:9090/opac/\r\nLogo=logoabcd.png\r\nlink_logo=[http://my-library.org](http://my-library.org)\r\nTituloPagina=My Library Catalog\r\nfooter_text=\xa9 2024 Library Systems\r\nstyles=styles.css\r\n\n"})}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"OpacHttp"})}),": Must match your server's URL exactly. If images break, check this first."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"styles"})}),": Points to the CSS file in ",(0,n.jsx)(o.code,{children:"assets/css/"}),"."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"charset"})}),": Usually ",(0,n.jsx)(o.code,{children:"UTF-8"})," or ",(0,n.jsx)(o.code,{children:"ISO-8859-1"}),". If special characters appear as ",(0,n.jsx)(o.code,{children:"\xc3\xa3"}),", check this setting."]}),"\n"]}),"\n",(0,n.jsxs)(o.h2,{id:"3-the-opac_conf-directory-structure",children:["3. The ",(0,n.jsx)(o.code,{children:"opac_conf"})," Directory Structure"]}),"\n",(0,n.jsxs)(o.p,{children:["The ",(0,n.jsx)(o.code,{children:"bases/opac_conf/"}),' folder contains the "Global Configuration" that applies to all databases unless overridden.']}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"bases.dat"})}),": The master list of databases available in the OPAC."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"lang.tab"})}),": Maps language codes (en, es, pt) to human-readable names."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"formatos.dat"})}),": Defines the output options (ISO, Word, Print) available in the toolbar."]}),"\n",(0,n.jsxs)(o.li,{children:[(0,n.jsx)(o.strong,{children:(0,n.jsx)(o.code,{children:"record_toolbar.tab"})}),": Controls which icons appear above records (Print, Reserve, etc.)."]}),"\n"]})]})}function h(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);