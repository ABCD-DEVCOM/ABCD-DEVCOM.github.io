"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[1e3],{28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>a});var r=s(96540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}},88419:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"abcd-advanced/isisscript/reference/do","title":"<do>","description":"Defines the execution scope of a task (search, update, list, etc).","source":"@site/docs/abcd-advanced/isisscript/reference/do.md","sourceDirName":"abcd-advanced/isisscript/reference","slug":"/abcd-advanced/isisscript/reference/do","permalink":"/docs/3.1/abcd-advanced/isisscript/reference/do","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-advanced/isisscript/reference/do.md","tags":[],"version":"current","frontMatter":{"title":"<do>","description":"Defines the execution scope of a task (search, update, list, etc)."},"sidebar":"tutorialSidebar","previous":{"title":"<display>","permalink":"/docs/3.1/abcd-advanced/isisscript/reference/display"},"next":{"title":"<export>","permalink":"/docs/3.1/abcd-advanced/isisscript/reference/export"}}');var i=s(74848),t=s(28453);const d={title:"<do>",description:"Defines the execution scope of a task (search, update, list, etc)."},a="Element <do>",l={},c=[{value:"Usage",id:"usage",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Attribute <code>task</code>",id:"attribute-task",level:2},{value:"Generic Repetition (No Task)",id:"generic-repetition-no-task",level:3},{value:"Task Details",id:"task-details",level:2},{value:"<code>task=&quot;fullinvertion&quot;</code>",id:"taskfullinvertion",level:3},{value:"<code>task=&quot;import&quot;</code>",id:"taskimport",level:3},{value:"<code>task=&quot;invertedload&quot;</code>",id:"taskinvertedload",level:3},{value:"<code>task=&quot;keyrange&quot;</code>",id:"taskkeyrange",level:3},{value:"<code>task=&quot;list&quot;</code>",id:"tasklist",level:3},{value:"<code>task=&quot;mastersort&quot;</code>",id:"taskmastersort",level:3},{value:"<code>task=&quot;mfnrange&quot;</code>",id:"taskmfnrange",level:3},{value:"<code>task=&quot;search&quot;</code>",id:"tasksearch",level:3},{value:"<code>task=&quot;update&quot;</code>",id:"taskupdate",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"element-do",children:["Element ",(0,i.jsx)(n.code,{children:"<do>"})]})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"<do>"})," element indicates the beginning of an IsisScript task. It is the central processing unit of the script."]}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Allowed content:"})," ",(0,i.jsx)(n.code,{children:"<call> <cgitable> <define> <display> <do> <export> <extract> <field> <file> <flow> <hl> <label> <list> <loop> <parm> <proc> <return> <trace> <update>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parent elements:"})," ",(0,i.jsx)(n.code,{children:"<do> <function> <hl> <loop> <section> <update>"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do [task="TASK_NAME"]>\r\n    </do>\r\n\n'})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"task"})," attribute is used to indicate the type of task to be executed. The parameters for execution are indicated with the ",(0,i.jsx)(n.code,{children:"<parm>"})," element. The ",(0,i.jsx)(n.code,{children:"<loop>"})," element indicates the set of instructions to be executed for each task item."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"attribute-task",children:["Attribute ",(0,i.jsx)(n.code,{children:"task"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Options:"})," ",(0,i.jsx)(n.code,{children:"fullinvertion"})," ",(0,i.jsx)(n.code,{children:"import"})," ",(0,i.jsx)(n.code,{children:"invertedload"})," ",(0,i.jsx)(n.code,{children:"keyrange"})," ",(0,i.jsx)(n.code,{children:"list"})," ",(0,i.jsx)(n.code,{children:"mastersort"})," ",(0,i.jsx)(n.code,{children:"mfnrange"})," ",(0,i.jsx)(n.code,{children:"search"})," ",(0,i.jsx)(n.code,{children:"update"})]}),"\n",(0,i.jsx)(n.p,{children:"It identifies the task to be performed."}),"\n",(0,i.jsx)(n.h3,{id:"generic-repetition-no-task",children:"Generic Repetition (No Task)"}),"\n",(0,i.jsxs)(n.p,{children:["The absence of the ",(0,i.jsx)(n.code,{children:"task"})," attribute indicates a task-independent repetition. It simply loops a specific number of times defined by the parameter ",(0,i.jsx)(n.code,{children:"to"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do>\r\n   <parm name="to">500</parm>\r\n   <field action="define" tag="1001">Isis_Current</field>\r\n   <field action="define" tag="1002">Isis_Total</field>\r\n   <loop>\r\n      <display>\r\n         <pft>newline(\'<br>\'),v1001,\'/\',v1002/</pft>\r\n      </display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"task-details",children:"Task Details"}),"\n",(0,i.jsx)(n.h3,{id:"taskfullinvertion",children:(0,i.jsx)(n.code,{children:'task="fullinvertion"'})}),"\n",(0,i.jsx)(n.p,{children:"Performs the full generation of the database inverted file (IF)."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="fst">'})}),": The FST (Field Select Table) to be used."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="fullinvertion">\r\n   <parm name="db"><pft>v2001</pft></parm>\r\n   <parm name="fst"><pft>v2061</pft></parm>\r\n   <field action="define" tag="1102">Isis_Status</field>\r\n   <display><pft>\'Full invertion: \',v2001/</pft></display>\r\n   <loop></loop>\r\n   <display><pft>\'Finished.\'/</pft></display>\r\n   <display><pft>\'Lock status = \'v1102/</pft></display>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskimport",children:(0,i.jsx)(n.code,{children:'task="import"'})}),"\n",(0,i.jsx)(n.p,{children:"Imports data from a text file, loading it as database records."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="file">'})}),": The input file name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="type">'})}),": (Optional) File type. If not specified, ",(0,i.jsx)(n.strong,{children:"ISO-2709"})," is assumed."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="import">\r\n   <parm name="file"><pft>v2041</pft></parm>\r\n   <parm name="type"><pft>v2042</pft></parm>\r\n   <loop>\r\n      <display><pft>ALL</pft></display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskinvertedload",children:(0,i.jsx)(n.code,{children:'task="invertedload"'})}),"\n",(0,i.jsx)(n.p,{children:"Loads the inverted file using a temporary database containing pre-sorted keys."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Target database name (whose inverted file is being loaded)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="keysdb">'})}),": Source database name (containing sorted keys)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="invertedload">\r\n   <parm name="db">TEST</parm>\r\n   <parm name="keysdb">TESTKEYS</parm>\r\n   <field action="define" tag="1">Isis_Posting</field>\r\n   <field action="define" tag="2">Isis_Key</field>\r\n   <field action="define" tag="1102">Isis_Status</field>\r\n   <display><pft>\'Inverted load ...\'/</pft></display>\r\n   <loop></loop>\r\n   <display><pft>\'Lock status = \'v1102/</pft></display>\r\n   <flow action="exit">\r\n      <pft>if val(v1102) <> 0 then v1102 fi</pft>\r\n   </flow>\r\n   <display><pft>\'Inverted load: TEST loaded.\'/</pft></display>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskkeyrange",children:(0,i.jsx)(n.code,{children:'task="keyrange"'})}),"\n",(0,i.jsx)(n.p,{children:"Accesses the database inverted file (Dictionary)."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="from">'})}),": Initial key (term)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="to">'})}),": Final key (term)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="count">'})}),": Max number of keys."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="reverse">'})}),": If set, access keys in reverse order."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="posting">'})}),": Iterates through the postings list of each key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="posttag">'})}),": Iterates through postings for a specific tag."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="keyrange">\r\n   <parm name="db"><pft>v2001</pft></parm>\r\n   <parm name="from">\r\n      <pft>v2002,if a(v2002) then v2101 fi</pft>\r\n   </parm>\r\n   <parm name="count"><pft>v2003,"20"n2003</pft></parm>\r\n   <parm name="reverse"><pft>v2004</pft></parm>\r\n   <parm name="to"><pft>v2006</pft></parm>\r\n\r\n   <field action="define" tag="1001">Isis_Current</field>\r\n   <field action="define" tag="1">Isis_Key</field>\r\n   <field action="define" tag="2">Isis_Postings</field>\r\n\r\n   <display><pft>\'##) POSTINGS\',c15,\'KEY\'/#</pft></display>\r\n\r\n   <loop>\r\n      <display>\r\n         <pft>f(val(v1001),2,0),\') \',v2,c15,v1/</pft>\r\n      </display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"tasklist",children:(0,i.jsx)(n.code,{children:'task="list"'})}),"\n",(0,i.jsxs)(n.p,{children:["Accesses a list of items previously loaded with the ",(0,i.jsx)(n.code,{children:"<list>"})," element."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="from">'})}),": Starting item index."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="to">'})}),": Last item index."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="count">'})}),": Number of items to process."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="reverse">'})}),": Process list in reverse order."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="sort">'})}),": (Optional) Sorts the list before processing."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<list action="load" type="sort"><pft>\'1\'/,\'2\'/,\'3\'/</pft></list>\r\n<list action="load" type="sort"><pft>\'9\'/,\'8\'/,</pft></list>\r\n<list action="load" type="sort"><pft>\'F\'/,\'Z\'/,\'A\'/</pft></list>\r\n\r\n<do task="list">\r\n   <field action="define" tag="1001">Isis_Current</field>\r\n   <field action="define" tag="1002">Isis_Items</field>\r\n   <field action="define" tag="1">Isis_Item</field>\r\n   <loop>\r\n       <display>\r\n          <pft>v1001,\'/\',v1002,c10,v1/</pft>\r\n       </display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskmastersort",children:(0,i.jsx)(n.code,{children:'task="mastersort"'})}),"\n",(0,i.jsx)(n.p,{children:"Sorts the records of the master file physically (or generates a sorted copy)."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="key">'})}),": The PFT expression defining the sort key."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="keylength">'})}),": Maximum length of the sort key."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="mastersort">\r\n   <parm name="db">CDS</parm>\r\n   <parm name="key"><pft>v24</pft></parm>\r\n   <parm name="keylength">100</parm>\r\n   <field action="define" tag="1102">Isis_Status</field>\r\n\r\n   <display><pft>\'Key sort ...\'/</pft></display>\r\n   <loop></loop>\r\n   <display><pft>\'Lock status = \'v1102/</pft></display>\r\n   <display><pft>\'Key sort: CDS sorted.\'/</pft></display>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskmfnrange",children:(0,i.jsx)(n.code,{children:'task="mfnrange"'})}),"\n",(0,i.jsx)(n.p,{children:"Accesses a range of database records sequentially by MFN."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="from">'})}),": Initial MFN."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="to">'})}),": Final MFN."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="count">'})}),": Max number of records."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="reverse">'})}),": Process in reverse MFN order."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="mfnrange">\r\n   <parm name="db">CDS</parm>\r\n   <parm name="from">25</parm>\r\n   <parm name="count">10</parm>\r\n   <loop>\r\n      <display><pft>ALL</pft></display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"tasksearch",children:(0,i.jsx)(n.code,{children:'task="search"'})}),"\n",(0,i.jsx)(n.p,{children:"Retrieves records using a boolean search expression."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="expression">'})}),": Search query (e.g., ",(0,i.jsx)(n.code,{children:"water * soil"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="from">'})}),": Start from the Nth result."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="count">'})}),": Limit results count."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="reverse">'})}),": Process results in reverse order (highest MFN first)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="search">\r\n   <parm name="db">CDS</parm>\r\n   <parm name="expression">plants * water</parm>\r\n   <loop>\r\n      <display><pft>mfn/</pft></display>\r\n   </loop>\r\n</do>\r\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"taskupdate",children:(0,i.jsx)(n.code,{children:'task="update"'})}),"\n",(0,i.jsx)(n.p,{children:"Updates existing records or adds new ones."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="db">'})}),": Database name."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="mfn">'})}),": Specific MFN to update, or ",(0,i.jsx)(n.code,{children:"New"})," to create one."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="lockid">'})}),": User/Session ID for record locking."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:'<parm name="expire">'})}),": Lock expiration time in seconds."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<do task="update">\r\n   <parm name="db">CDS</parm>\r\n   <parm name="mfn">New</parm>\r\n   <field action="define" tag="1102">Isis_Status</field>\r\n\r\n   <update>\r\n      <field action="replace" tag="20">\r\n         <pft>date</pft>\r\n      </field>\r\n      <write>Unlock</write>\r\n      <display><pft>ALL</pft></display>\r\n   </update>\r\n</do>\r\n\n'})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);