"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[3649],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var t=s(96540);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}},51212:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"abcd-advanced/cisis-utilities/maintenance","title":"Maintenance Utilities","description":"These tools are essential for the physical health of the Master File (.mst). They handle sorting, cross-platform conversion, tag renaming, and manual unlocking of databases.","source":"@site/versioned_docs/version-2.0/abcd-advanced/cisis-utilities/maintenance.md","sourceDirName":"abcd-advanced/cisis-utilities","slug":"/abcd-advanced/cisis-utilities/maintenance","permalink":"/docs/2.0/abcd-advanced/cisis-utilities/maintenance","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-2.0/abcd-advanced/cisis-utilities/maintenance.md","tags":[],"version":"2.0","sidebarPosition":3,"frontMatter":{"title":"Maintenance Utilities","sidebar_label":"Maintenance (Clean/Sort/Lock)","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"MX (The Swiss Army Knife)","permalink":"/docs/2.0/abcd-advanced/cisis-utilities/mx"},"next":{"title":"Indexing (Inverted File)","permalink":"/docs/2.0/abcd-advanced/cisis-utilities/indexing"}}');var r=s(74848),i=s(28453);const l={title:"Maintenance Utilities",sidebar_label:"Maintenance (Clean/Sort/Lock)",sidebar_position:3},d="Maintenance Utilities",c={},a=[{value:"MSRT (Sort)",id:"msrt-sort",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Parameters",id:"parameters",level:3},{value:"How it works",id:"how-it-works",level:3},{value:"Examples",id:"examples",level:3},{value:"RETAG (Renumber Tags)",id:"retag-renumber-tags",level:2},{value:"Syntax",id:"syntax-1",level:3},{value:"Retag Table (<code>.tab</code>)",id:"retag-table-tab",level:3},{value:"Unlocking with RETAG",id:"unlocking-with-retag",level:3},{value:"CRUNCHMF (Cross-Platform Conversion)",id:"crunchmf-cross-platform-conversion",level:2},{value:"Syntax",id:"syntax-2",level:3},{value:"Options",id:"options",level:3},{value:"Example",id:"example",level:3},{value:"CTLMFN (Control Record / Unlock)",id:"ctlmfn-control-record--unlock",level:2},{value:"Syntax",id:"syntax-3",level:3},{value:"Control Fields",id:"control-fields",level:3},{value:"Example: Resetting a Lock",id:"example-resetting-a-lock",level:3},{value:"MXCP (Copy &amp; Clean)",id:"mxcp-copy--clean",level:2},{value:"MXTB (Tabulation)",id:"mxtb-tabulation",level:2}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"maintenance-utilities",children:"Maintenance Utilities"})}),"\n",(0,r.jsxs)(n.p,{children:["These tools are essential for the physical health of the Master File (",(0,r.jsx)(n.code,{children:".mst"}),"). They handle sorting, cross-platform conversion, tag renaming, and manual unlocking of databases."]}),"\n",(0,r.jsx)(n.h2,{id:"msrt-sort",children:"MSRT (Sort)"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"MSRT"})," program sorts a master file in ascending order based on sort keys generated by a format specification."]}),"\n",(0,r.jsxs)(n.p,{children:["When a master file is sorted, record ",(0,r.jsx)(n.code,{children:"mfn=1"})," will contain the lowest sort key, ",(0,r.jsx)(n.code,{children:"mfn=2"})," the second lowest, and so on."]}),"\n",(0,r.jsx)(n.h3,{id:"syntax",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"msrt <dbname> <keylen> <keyfmt>|tag=<n> [-mfn] [+del] [tell=<n>]\r\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"dbname"})})}),(0,r.jsx)(n.td,{children:"The master file to be sorted in place."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"keylen"})})}),(0,r.jsx)(n.td,{children:"The fixed length of the sort key."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"keyfmt"})})}),(0,r.jsxs)(n.td,{children:["The PFT format used to generate the sort key (e.g., ",(0,r.jsx)(n.code,{children:"v10"}),")."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"tag=<n>"})})}),(0,r.jsxs)(n.td,{children:["Shortcut: Specifies a data field ",(0,r.jsx)(n.code,{children:"<n>"})," as the sort key without a PFT."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"-mfn"})})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Keep Original MFNs."})," Updates the ",(0,r.jsx)(n.code,{children:".mst"})," file in place without renumbering the MFNs. The physical order changes, but the ID remains."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"+del"})})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Delete Duplicates."})," If consecutive records have identical sort keys, they are deleted."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"tell=<n>"})})}),(0,r.jsxs)(n.td,{children:["Displays a progress message every ",(0,r.jsx)(n.code,{children:"<n>"})," keys processed."]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"how-it-works",children:"How it works"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Index Update:"})," MSRT updates the ",(0,r.jsx)(n.code,{children:".xrf"})," file, swapping entries to reflect the new order."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Renumbering (Default):"})," By default, records are renumbered after sorting."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["In-Place Update (",(0,r.jsx)(n.code,{children:"-mfn"}),"):"]})," If ",(0,r.jsx)(n.code,{children:"-mfn"})," is used, the records remain in the same physical slots (saving rewrite time), but the logical order is updated."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sort by Title (Tag 24)"}),"\r\nSorts the ",(0,r.jsx)(n.code,{children:"cds"})," database using the first 60 characters of field 24, converted to uppercase (Heading Mode)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"msrt \\cisis\\cds\\cds 60 mhu,v24\r\n\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Sort by Tag 998 (Fixed)"}),"\r\nSorts ",(0,r.jsx)(n.code,{children:"mxtb_out"})," assuming tag 998 contains numeric values padded with zeros."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"msrt mxtb_out 9 v998\r\n\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"retag-renumber-tags",children:"RETAG (Renumber Tags)"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"RETAG"})," program changes the tag of fields in the master file according to a conversion table. It modifies records in their original positions, preserving the master file structure."]}),"\n",(0,r.jsx)(n.h3,{id:"syntax-1",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"retag <dbname> {<retag.tab>|unlock} [from=<n>] [to=<n>] [tell=<n>] [shift=<n>]\r\n\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"retag-table-tab",children:["Retag Table (",(0,r.jsx)(n.code,{children:".tab"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["A simple text file mapping old tags to new tags. It may contain up to ",(0,r.jsx)(n.strong,{children:"5,461 entries"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"<old_tag> <new_tag>\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example Table:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"24 240\r\n70 700\r\n69 690\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"In this example, tag 24 becomes 240, 70 becomes 700, etc. Only records containing these tags are rewritten."})}),"\n",(0,r.jsx)(n.h3,{id:"unlocking-with-retag",children:"Unlocking with RETAG"}),"\n",(0,r.jsxs)(n.p,{children:["RETAG can also be used to perform a generic unlock of the master file using the ",(0,r.jsx)(n.code,{children:"unlock"})," keyword instead of a table."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"crunchmf-cross-platform-conversion",children:"CRUNCHMF (Cross-Platform Conversion)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CRUNCHMF"})," converts the binary structure of the Master File (",(0,r.jsx)(n.code,{children:".mst"})," and ",(0,r.jsx)(n.code,{children:".xrf"}),") from one operating system architecture to another (e.g., moving a database from Windows to Linux). The binary structures are often incompatible between systems (Little Endian vs Big Endian)."]}),"\n",(0,r.jsx)(n.p,{children:"The program automatically detects the source system format."}),"\n",(0,r.jsx)(n.h3,{id:"syntax-2",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"crunchmf <dbn> <target_dbn> [options]\r\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Option"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"target={os}"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Defines the target architecture. Default: ",(0,r.jsx)(n.code,{children:"linux"}),".",(0,r.jsx)("br",{}),"Values: ",(0,r.jsx)(n.code,{children:"pc"})," (Windows), ",(0,r.jsx)(n.code,{children:"linux"}),", ",(0,r.jsx)(n.code,{children:"hpux"}),", ",(0,r.jsx)(n.code,{children:"sun"}),", ",(0,r.jsx)(n.code,{children:"alpha"}),", ",(0,r.jsx)(n.code,{children:"vax"}),", ",(0,r.jsx)(n.code,{children:"unisys"}),", ",(0,r.jsx)(n.code,{children:"mpe"}),", ",(0,r.jsx)(n.code,{children:"cdc"}),", ",(0,r.jsx)(n.code,{children:"same"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"format={isis}"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Target format: ",(0,r.jsx)(n.code,{children:"isis"})," (Standard) or ",(0,r.jsx)(n.code,{children:"cisisX"})," (Extended)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"mstxl={0|1|2|4}"})})}),(0,r.jsxs)(n.td,{style:{textAlign:"left"},children:["Determines the maximum size of the ",(0,r.jsx)(n.code,{children:".mst"})," file.",(0,r.jsx)("br",{}),(0,r.jsx)(n.code,{children:"0"})," = 512MB (Default).",(0,r.jsx)("br",{}),"Higher values allow for databases larger than 2GB."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"tell=<n>"})})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:"Report progress."})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(n.p,{children:"Converting a Windows database to Linux:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"crunchmf bases/mydb/data/mydb bases/mydb/data/mydb_linux target=linux\r\n\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ctlmfn-control-record--unlock",children:"CTLMFN (Control Record / Unlock)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CTLMFN"})," reads and edits the ",(0,r.jsx)(n.strong,{children:"Control Record"})," (the header) of the Master File. This is the first block of the file containing critical metadata like the Next MFN and Locking flags."]}),"\n",(0,r.jsxs)(n.p,{children:["It is primarily used to ",(0,r.jsx)(n.strong,{children:"manually unlock"}),' a database stuck in a "Write Lock" or "Data Entry Lock" state.']}),"\n",(0,r.jsx)(n.h3,{id:"syntax-3",children:"Syntax"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ctlmfn <dbname>\r\n\n"})}),"\n",(0,r.jsx)(n.h3,{id:"control-fields",children:"Control Fields"}),"\n",(0,r.jsx)(n.p,{children:"When run, the tool displays a table of values:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Meaning"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nxtmfn"})}),(0,r.jsx)(n.td,{children:"Next MFN to be assigned (Total records + 1)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nxtmfb"})}),(0,r.jsx)(n.td,{children:"Last block assigned in the file."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"nxtmfp"})}),(0,r.jsx)(n.td,{children:"Next available position in the last block."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"mfcxx2"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Data Entry Lock"})," (Number of users inputting data)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"mfcxx3"})}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.strong,{children:"Exclusive Write Lock"})," (0 = Unlocked, 1 = Locked)."]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"example-resetting-a-lock",children:"Example: Resetting a Lock"}),"\n",(0,r.jsxs)(n.p,{children:['If a server crash leaves a database locked (Error: "Database already locked"), run ',(0,r.jsx)(n.code,{children:"ctlmfn"})," and reset ",(0,r.jsx)(n.code,{children:"mfcxx3"})," to ",(0,r.jsx)(n.code,{children:"0"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-text",children:"$ ctlmfn users\r\n*users\r\n nxtmfn nxtmfb nxtmfp  t  reccnt mfcxx1 mfcxx2 mfcxx3    RC\r\n     6     24    391   0      0      0      0      1      0\r\n\r\nnxtmfn [6]:\r\nnxtmfb [24]:\r\nnxtmfp [391]:\r\n...\r\nmfcxx3 [1]: 0\r\nok\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.em,{children:["Note: Press Enter to keep existing values, type ",(0,r.jsx)(n.code,{children:"0"})," for the lock field, and type ",(0,r.jsx)(n.code,{children:"ok"})," to save."]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mxcp-copy--clean",children:"MXCP (Copy & Clean)"}),"\n",(0,r.jsx)(n.p,{children:"Copies records from one database to another, serving as the primary tool for database compression and cleaning (removing deleted records)."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Syntax:"})," ",(0,r.jsx)(n.code,{children:"mxcp <in> create=<out> [clean] [undelete]"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Key Features:"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"clean"})}),": Compresses the MF, removing space from deleted records/fields."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"undelete"})}),": Recovers logically deleted records during the copy."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"mxtb-tabulation",children:"MXTB (Tabulation)"}),"\n",(0,r.jsx)(n.p,{children:"Generates frequency tables and statistics based on database keys."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Syntax:"})," ",(0,r.jsx)(n.code,{children:"mxtb <dbn> create=<dbout> <keylen>:<format>"})]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Example:"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"mxtb books create=stats 60:v100\r\n\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.em,{children:["(Creates a ",(0,r.jsx)(n.code,{children:"stats"})," database where records count the frequency of Authors in ",(0,r.jsx)(n.code,{children:"books"}),")."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);