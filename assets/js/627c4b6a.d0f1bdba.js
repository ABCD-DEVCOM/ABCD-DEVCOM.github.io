"use strict";(self.webpackChunkabcd_devcom_github_io=self.webpackChunkabcd_devcom_github_io||[]).push([[5080],{28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>a});var r=n(96540);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}},76706:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"abcd-faq/fixing-permissions-linux","title":"Troubleshooting: Fixing ABCD File Permissions on Linux","description":"This guide addresses common permission issues where the web server (Apache/Nginx) cannot write to directories, or where an SFTP user cannot edit files created by the system.","source":"@site/docs/abcd-faq/fixing-permissions-linux.md","sourceDirName":"abcd-faq","slug":"/abcd-faq/fixing-permissions-linux","permalink":"/docs/3.1/abcd-faq/fixing-permissions-linux","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/abcd-faq/fixing-permissions-linux.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Common Questions","permalink":"/docs/3.1/abcd-faq/common-questions"},"next":{"title":"Search & Data","permalink":"/docs/3.1/abcd-faq/search-data-issues"}}');var i=n(74848),t=n(28453);const o={},a="Troubleshooting: Fixing ABCD File Permissions on Linux",d={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: User &amp; Group Setup",id:"step-1-user--group-setup",level:2},{value:"Step 2: Define Ownership",id:"step-2-define-ownership",level:2},{value:"Step 3: Reset Base Permissions &amp; Enable SGID",id:"step-3-reset-base-permissions--enable-sgid",level:2},{value:"Step 4: ABCD Critical Exceptions",id:"step-4-abcd-critical-exceptions",level:2},{value:"A. The <code>bases</code> Directory (Data Folder)",id:"a-the-bases-directory-data-folder",level:3},{value:"B. The <code>cgi-bin</code> Directory (Executables)",id:"b-the-cgi-bin-directory-executables",level:3},{value:"C. Temporary &amp; Upgrade Folders",id:"c-temporary--upgrade-folders",level:3},{value:"Automated Fix Script",id:"automated-fix-script",level:2}];function l(e){const s={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"troubleshooting-fixing-abcd-file-permissions-on-linux",children:"Troubleshooting: Fixing ABCD File Permissions on Linux"})}),"\n",(0,i.jsx)(s.p,{children:"This guide addresses common permission issues where the web server (Apache/Nginx) cannot write to directories, or where an SFTP user cannot edit files created by the system."}),"\n",(0,i.jsxs)(s.p,{children:["This setup ensures a ",(0,i.jsx)(s.strong,{children:"coexistence environment"})," where:"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"You (via SFTP):"})," Have full control to edit code and upload files."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Web Server:"})," Has the necessary permissions to run the application and write to data folders."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"ABCD Binaries (CISIS):"})," Have execution rights."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Installation Path:"})," Assumed to be ",(0,i.jsx)(s.code,{children:"/opt/ABCD"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Web Server Group:"})," Typically ",(0,i.jsx)(s.code,{children:"www-data"})," (Ubuntu/Debian) or ",(0,i.jsx)(s.code,{children:"daemon"})," (XAMPP)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Your User:"})," The username you use to log in via SSH/SFTP."]}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:["In the commands below, replace ",(0,i.jsx)(s.code,{children:"www-data"})," with ",(0,i.jsx)(s.code,{children:"daemon"})," if you are using XAMPP/LAMPP."]})}),"\n",(0,i.jsx)(s.h2,{id:"step-1-user--group-setup",children:"Step 1: User & Group Setup"}),"\n",(0,i.jsxs)(s.p,{children:["First, ensure your user belongs to the web server's group. This allows you to edit files that belong to the group without needing to be ",(0,i.jsx)(s.code,{children:"root"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Add your current user to the web server group\r\nsudo usermod -aG www-data $USER\n"})}),"\n",(0,i.jsx)(s.admonition,{title:"Logout Required",type:"caution",children:(0,i.jsxs)(s.p,{children:["After running the command above, you must ",(0,i.jsx)(s.strong,{children:"logout and login again"})," (SSH/SFTP) for the group changes to take effect."]})}),"\n",(0,i.jsx)(s.h2,{id:"step-2-define-ownership",children:"Step 2: Define Ownership"}),"\n",(0,i.jsxs)(s.p,{children:["We will set ",(0,i.jsx)(s.strong,{children:"You"})," as the Owner (to facilitate SFTP editing) and the ",(0,i.jsx)(s.strong,{children:"Web Server"})," as the Group."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Replace <your_username> with your actual login user\r\nsudo chown -R <your_username>:www-data /opt/ABCD\n"})}),"\n",(0,i.jsx)(s.h2,{id:"step-3-reset-base-permissions--enable-sgid",children:"Step 3: Reset Base Permissions & Enable SGID"}),"\n",(0,i.jsx)(s.p,{children:"We will apply a standard permission set:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Directories (2775):"})," The ",(0,i.jsx)(s.code,{children:"2"})," enables the ",(0,i.jsx)(s.strong,{children:"SGID bit"}),". This ensures that any ",(0,i.jsx)(s.em,{children:"new"})," file created inside these folders inherits the ",(0,i.jsx)(s.code,{children:"www-data"})," group automatically, preventing future permission errors."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Files (0664):"})," Owner and Group can write; others can read."]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Set directories to 2775 (User/Group write + SGID)\r\nsudo find /opt/ABCD/www -type d -exec chmod 2775 {} \\;\r\n\r\n# Set files to 0664 (User/Group write, Public read)\r\nsudo find /opt/ABCD/www -type f -exec chmod 0664 {} \\;\n"})}),"\n",(0,i.jsx)(s.h2,{id:"step-4-abcd-critical-exceptions",children:"Step 4: ABCD Critical Exceptions"}),"\n",(0,i.jsx)(s.p,{children:"The ABCD software relies on CISIS utilities and flat-file databases. These require specific permissions that differ from standard web applications."}),"\n",(0,i.jsxs)(s.h3,{id:"a-the-bases-directory-data-folder",children:["A. The ",(0,i.jsx)(s.code,{children:"bases"})," Directory (Data Folder)"]}),"\n",(0,i.jsx)(s.p,{children:'The application, PHP scripts, and CISIS binaries all compete to read/write/modify text files here. To prevent "Permission Denied" errors during data entry or indexing, full permissions are required.'}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Grant full read/write permissions for data operations\r\nsudo chmod -R 777 /opt/ABCD/www/bases/\n"})}),"\n",(0,i.jsx)(s.admonition,{title:"Security Note",type:"warning",children:(0,i.jsxs)(s.p,{children:["While ",(0,i.jsx)(s.code,{children:"777"})," is generally discouraged in shared hosting, it is often required for the ",(0,i.jsx)(s.code,{children:"/bases/"})," directory in ABCD due to the nature of CISIS file manipulation and inverted index generation. Ensure your server firewall is properly configured."]})}),"\n",(0,i.jsxs)(s.h3,{id:"b-the-cgi-bin-directory-executables",children:["B. The ",(0,i.jsx)(s.code,{children:"cgi-bin"})," Directory (Executables)"]}),"\n",(0,i.jsxs)(s.p,{children:["This folder contains the WXIS and other CISIS binaries. They must have the ",(0,i.jsx)(s.strong,{children:"execution bit"})," (+x) set to function."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Set directory permissions\r\nsudo chmod -R 755 /opt/ABCD/www/cgi-bin/\r\n\r\n# Force execution flag on binary files\r\nsudo chmod -R +x /opt/ABCD/www/cgi-bin/\n"})}),"\n",(0,i.jsx)(s.h3,{id:"c-temporary--upgrade-folders",children:"C. Temporary & Upgrade Folders"}),"\n",(0,i.jsxs)(s.p,{children:["If you are using the built-in ",(0,i.jsx)(s.em,{children:"Update Manager"}),", it needs to create temporary directories."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Allow the web server to create folders for upgrades\r\nsudo chmod -R 777 /opt/ABCD/www/htdocs/upgrade/ 2>/dev/null\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"automated-fix-script",children:"Automated Fix Script"}),"\n",(0,i.jsxs)(s.p,{children:["You can save the following script as ",(0,i.jsx)(s.code,{children:"fix_abcd_perms.sh"})," in your server root to quickly repair permissions in the future."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",metastring:'title="fix_abcd_perms.sh"',children:'#!/bin/bash\r\n\r\n# Configuration\r\nABCD_USER="<your_username>" # Change this to your user\r\nWEBSERVER_GROUP="www-data"  # Change to \'daemon\' if using XAMPP\r\nDIR="/opt/ABCD/www"\r\n\r\necho "1. Setting Ownership to $ABCD_USER:$WEBSERVER_GROUP..."\r\nchown -R $ABCD_USER:$WEBSERVER_GROUP $DIR\r\n\r\necho "2. Applying standard permissions (SGID enabled)..."\r\nfind $DIR/htdocs -type d -exec chmod 2775 {} \\;\r\nfind $DIR/htdocs -type f -exec chmod 0664 {} \\;\r\n\r\necho "3. Applying strict permissions for Database storage..."\r\nchmod -R 777 $DIR/bases\r\n\r\necho "4. Enabling execution for CISIS binaries..."\r\nchmod -R 755 $DIR/cgi-bin\r\nchmod -R +x $DIR/cgi-bin/*\r\n\r\necho "Done! ABCD permissions are fixed."\n'})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);